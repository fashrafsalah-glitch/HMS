{% extends "base.html" %}
{% block content %}
<div class="container py-3">
  <h3>Result – {{ object.test.english_name }} (Request #{{ object.request_id }})</h3>

  <form method="post">{% csrf_token %}
    <div class="row g-2">
      {% if object.test.result_type == 'numeric' %}
        <div class="col-md-3"><label class="form-label">Value</label>{{ form.value_num }}</div>
        <div class="col-md-2"><label class="form-label">Unit</label>{{ form.unit }}</div>
        <div class="col-md-2"><label class="form-label">Ref Min</label>{{ form.ref_min }}</div>
        <div class="col-md-2"><label class="form-label">Ref Max</label>{{ form.ref_max }}</div>
      {% elif object.test.result_type == 'boolean' %}
        <div class="col-md-3">
          <label class="form-label">Result</label>
          {{ form.value_bool }}
          <div class="form-text">True = Positive, False = Negative</div>
        </div>
      {% else %}
        <div class="col-12"><label class="form-label">Text Result</label>{{ form.value_text }}</div>
      {% endif %}
      <div class="col-12"><label class="form-label">Notes</label>{{ form.notes }}</div>
    </div>
    

    <div class="mt-3 d-flex gap-2">
      <button class="btn btn-primary">Save</button>
      <button name="mark_verified" value="1" class="btn btn-success">Save & Verify</button>
      <a class="btn btn-secondary" href="{% url 'laboratory:lab_request_detail' object.request_id %}">Back</a>
    </div>
  </form>
</div>

<a href="{% url 'laboratory:lab_request_list' %}" class="btn btn-light btn-sm">
  <i class="bi bi-arrow-left"></i> العودة لقائمة طلبات المعمل
</a>
{% endblock %}