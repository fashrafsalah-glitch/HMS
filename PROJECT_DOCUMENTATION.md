# Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª (Hospital Management System - HMS)
## Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹

---

## ğŸ“‹ ÙÙ‡Ø±Ø³ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹](#Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©-Ø¹Ù„Ù‰-Ø§Ù„Ù…Ø´Ø±ÙˆØ¹)
2. [Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠ](#Ø§Ù„Ù‡ÙŠÙƒÙ„-Ø§Ù„ØªÙ‚Ù†ÙŠ)
3. [Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª](#Ù‚Ø§Ø¹Ø¯Ø©-Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
4. [Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©](#Ø§Ù„ÙˆØ­Ø¯Ø§Øª-Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)
5. [Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„Ø£Ø°ÙˆÙ†Ø§Øª](#Ù†Ø¸Ø§Ù…-Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©-ÙˆØ§Ù„Ø£Ø°ÙˆÙ†Ø§Øª)
6. [ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…](#ÙˆØ§Ø¬Ù‡Ø§Øª-Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)
7. [ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹](#ØªØ´ØºÙŠÙ„-Ø§Ù„Ù…Ø´Ø±ÙˆØ¹)
8. [Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©](#Ø§Ù„Ù…ÙŠØ²Ø§Øª-Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©)

---

## ğŸ¥ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

### Ø§Ù„ÙˆØµÙ
Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª (HMS) Ù‡Ùˆ Ù†Ø¸Ø§Ù… Ø´Ø§Ù…Ù„ Ù…Ø·ÙˆØ± Ø¨Ù€ Django Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ù…Ù† Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙˆØ§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ÙˆØ§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª.

### Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
- **Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰**: ØªØ³Ø¬ÙŠÙ„ ÙˆØªØªØ¨Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙˆØ§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©
- **Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†**: Ù†Ø¸Ø§Ù… HR Ø´Ø§Ù…Ù„ Ù„Ù„Ø£Ø·Ø¨Ø§Ø¡ ÙˆØ§Ù„Ù…Ù…Ø±Ø¶ÙŠÙ† ÙˆØ§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
- **Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª**: Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬
- **Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª**: ØªØªØ¨Ø¹ ÙˆØµÙŠØ§Ù†Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø·Ø¨ÙŠØ©
- **Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª**: ØªÙ‚Ø§Ø±ÙŠØ± Ù…ÙØµÙ„Ø© Ø¹Ù† Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰

---

## ğŸ”§ Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠ

### Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
```
- Python 3.x
- Django 5.2.5
- SQLite (Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
- HTML/CSS/JavaScript (Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª)
- Bootstrap (Ø§Ù„ØªØµÙ…ÙŠÙ…)
- QR Code Generation (Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯)
- MPTT (Hierarchical Data)
```

### Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª (requirements.txt)
```
Django==5.2.5
django-mptt==0.17.0          # Ù„Ù„Ù‡ÙŠØ§ÙƒÙ„ Ø§Ù„Ø´Ø¬Ø±ÙŠØ© (Ø§Ù„Ø£Ù‚Ø³Ø§Ù…)
django-widget-tweaks==1.5.0  # ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
qrcode==8.2                   # Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙƒÙˆØ§Ø¯ QR
pillow==11.3.0               # Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±
reportlab==4.4.3             # Ø¥Ù†Ø´Ø§Ø¡ PDF
pandas==2.3.1                # Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
requests==2.32.5             # Ø·Ù„Ø¨Ø§Øª HTTP
```

### Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª
```
HMS-main/
â”œâ”€â”€ core/                    # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â”œâ”€â”€ superadmin/             # Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§
â”œâ”€â”€ manager/                # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙˆØ§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©
â”œâ”€â”€ hr/                     # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©
â”œâ”€â”€ laboratory/             # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª
â”œâ”€â”€ maintenance/            # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©
â”œâ”€â”€ staff/                  # Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
â”œâ”€â”€ general/                # Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
â”œâ”€â”€ activity/               # ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø£Ù†Ø´Ø·Ø©
â”œâ”€â”€ accounts/               # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
â”œâ”€â”€ templates/              # Ù‚ÙˆØ§Ù„Ø¨ HTML
â”œâ”€â”€ static/                 # Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ©
â”œâ”€â”€ media/                  # Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
â””â”€â”€ db.sqlite3             # Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
```

---

## ğŸ—„ï¸ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Models)

#### 1. Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ (Hospital)
```python
class Hospital(models.Model):
    name = CharField(max_length=100)
    hospital_type = CharField(choices=['general', 'specialized', 'clinic'])
    location = CharField(max_length=200)
    address = TextField()
```

#### 2. Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø®ØµØµ (CustomUser)
```python
class CustomUser(AbstractUser):
    ROLES = ['super_admin', 'doctor', 'nurse', 'receptionist', 'pharmacist', 'hospital_manager', 'hr']
    
    role = CharField(choices=ROLE_CHOICES)
    hospital = ForeignKey(Hospital)
    departments = ManyToManyField(Department)
    national_id = CharField(unique=True)
    job_number = CharField(unique=True)
    salary_base = DecimalField()
    hire_date = DateField()
    attendance_method = CharField(choices=ATTENDANCE_METHODS)
```

#### 3. Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø±ÙŠØ¶ (Patient)
```python
class Patient(models.Model):
    first_name = CharField(max_length=50)
    middle_name = CharField(max_length=50, blank=True)
    last_name = CharField(max_length=50)
    birth_year = IntegerField()
    gender = CharField(choices=['male', 'female'])
    national_id = CharField(unique=True)
    phone = CharField()
    address = TextField()
    blood_type = CharField()
    allergies = TextField()
    emergency_contact = CharField()
```

#### 4. Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù‚Ø³Ù… (Department) - Ù‡ÙŠÙƒÙ„ Ø´Ø¬Ø±ÙŠ
```python
class Department(MPTTModel):
    name = CharField(max_length=100, unique=True)
    parent = TreeForeignKey('self', null=True, blank=True)
    department_type = CharField(choices=TYPE_CHOICES)
    hospital = ForeignKey(Hospital)
    is_active = BooleanField(default=True)
```

#### 5. Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø·Ø¨ÙŠ (MedicalRecord)
```python
class MedicalRecord(models.Model):
    patient = ForeignKey(Patient)
    doctor = ForeignKey(CustomUser)
    department = ForeignKey(Department)
    visit_date = DateTimeField()
    chief_complaint = TextField()
    history_present_illness = TextField()
    physical_examination = TextField()
    diagnosis = TextField()
    treatment_plan = TextField()
    medications = ManyToManyField(Medication)
```

#### 6. Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø®ØªØ¨Ø±
```python
class Test(models.Model):
    english_name = CharField(max_length=200)
    arabic_name = CharField(max_length=100)
    category = CharField(choices=['blood', 'urine', 'microbio', 'other'])
    normal_range_min = DecimalField()
    normal_range_max = DecimalField()
    unit = CharField(max_length=50)

class LabRequest(models.Model):
    patient = ForeignKey(Patient)
    doctor = ForeignKey(CustomUser)
    tests = ManyToManyField(Test, through='LabRequestItem')
    status = CharField(choices=STATUS_CHOICES)
    requested_at = DateTimeField()
    qr_code = ImageField()  # Ù„Ù„ØªØªØ¨Ø¹ Ø¨Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
```

#### 7. Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª
```python
class Device(models.Model):
    name = CharField(max_length=200)
    model = CharField(max_length=100)
    serial_number = CharField(unique=True)
    department = ForeignKey(Department)
    room = ForeignKey(Room)
    status = CharField(choices=['working', 'needs_maintenance', 'out_of_order'])
    availability = BooleanField(default=True)
    clean_status = CharField(choices=CLEAN_STATUS_CHOICES)
    sterilization_status = CharField(choices=STERILIZATION_STATUS_CHOICES)
```

### Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„

```mermaid
erDiagram
    Hospital ||--o{ Department : contains
    Hospital ||--o{ CustomUser : employs
    Department ||--o{ CustomUser : "works in"
    CustomUser ||--o{ MedicalRecord : creates
    Patient ||--o{ MedicalRecord : has
    Patient ||--o{ LabRequest : requests
    LabRequest ||--o{ LabRequestItem : contains
    Test ||--o{ LabRequestItem : tested
    Department ||--o{ Device : located
    Room ||--o{ Device : contains
    Device ||--o{ DeviceUsage : tracks
```

---

## ğŸ“¦ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### 1. ÙˆØ­Ø¯Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ (superadmin)
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:**
- Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø§Ù…
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

**Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:**
- `models.py`: Hospital, SystemSettings
- `views.py`: Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
- `forms.py`: Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª

### 2. ÙˆØ­Ø¯Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ (manager)
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:**
- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø¬Ø¯Ø¯
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø±Ù‘Ø© ÙˆØ§Ù„ØºØ±Ù
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙˆØ§Ù„ÙˆØµÙØ§Øª

**Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:**
- `models.py`: Patient, MedicalRecord, Medication, Room, Bed
- `views.py`: Ø¹Ø±Ø¶ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø±Ø¶Ù‰ØŒ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- `forms.py`: Ù†Ù…Ø§Ø°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø¶Ù‰
- `icd_cache.py`: ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ù†Ø¸Ø§Ù… ICD-11 Ù„Ù„ØªØ´Ø®ÙŠØµ

**Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø®Ø§ØµØ©:**
- Ù†Ø¸Ø§Ù… QR Code Ù„ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø±Ø¶Ù‰
- ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø¨ØµÙŠØºØ© PDF
- Ù†Ø¸Ø§Ù… ØªØµÙ†ÙŠÙ ICD-11 Ù„Ù„Ø£Ù…Ø±Ø§Ø¶

### 3. ÙˆØ­Ø¯Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ© (hr)
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:**
- Ø¥Ø¯Ø§Ø±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
- Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±ÙˆØ§ØªØ¨ ÙˆØ§Ù„Ù…ÙƒØ§ÙØ¢Øª
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª ÙˆØ§Ù„Ù…Ù‡Ø§Ù…

**Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:**
```python
# Ø§Ù„Ù…ÙˆØ¸Ù
CustomUser: Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ù„ÙˆØ¸ÙŠÙÙŠØ©

# Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª ÙˆØ§Ù„ØªØ±Ø§Ø®ÙŠØµ
Certificate: Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
ProfessionalPracticePermit: ØªØ±Ø§Ø®ÙŠØµ Ø§Ù„Ù…Ø²Ø§ÙˆÙ„Ø©
HealthInsurance: Ø§Ù„ØªØ£Ù…ÙŠÙ† Ø§Ù„ØµØ­ÙŠ

# Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ÙˆØ§Ù„Ù…Ù†Ø§ÙˆØ¨Ø§Øª
Schedule: Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„
StaffDailyAvailability: ØªÙˆÙØ± Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠ
ShiftType: Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø§Øª

# Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø±ÙˆØ§ØªØ¨
Attendance: Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±
Payroll: ÙƒØ´ÙˆÙ Ø§Ù„Ø±ÙˆØ§ØªØ¨
Bonus: Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª ÙˆØ§Ù„Ø­ÙˆØ§ÙØ²

# Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª
VacationPolicy: Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª
LeaveRequest: Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©
VacationBalance: Ø£Ø±ØµØ¯Ø© Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª
```

### 4. ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª (laboratory)
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:**
- Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„
- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
- ØªØªØ¨Ø¹ Ø§Ù„Ø¹ÙŠÙ†Ø§Øª
- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±

**Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„:**
1. **Ø·Ù„Ø¨ Ø§Ù„ØªØ­Ù„ÙŠÙ„**: Ø§Ù„Ø·Ø¨ÙŠØ¨ ÙŠØ·Ù„Ø¨ ØªØ­Ø§Ù„ÙŠÙ„ Ù„Ù„Ù…Ø±ÙŠØ¶
2. **Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨**: Ø§Ù„Ù…Ø®ØªØ¨Ø± ÙŠÙ‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨
3. **Ø¬Ù…Ø¹ Ø§Ù„Ø¹ÙŠÙ†Ø©**: Ø£Ø®Ø° Ø§Ù„Ø¹ÙŠÙ†Ø© Ù…Ù† Ø§Ù„Ù…Ø±ÙŠØ¶
4. **Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„**: ØªÙ†ÙÙŠØ° Ø§Ù„ÙØ­ÙˆØµØ§Øª
5. **ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬**: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
6. **Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯**: Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø®ØªØµ

### 5. ÙˆØ­Ø¯Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© (maintenance)
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:**
- ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©
- Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©
- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø£Ø¹Ø·Ø§Ù„
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§ÙØ© ÙˆØ§Ù„ØªØ¹Ù‚ÙŠÙ…

**Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø¹Ø¯Ø§Øª:**
- `working`: ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ
- `needs_maintenance`: ÙŠØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©
- `out_of_order`: Ø¹Ø·Ù„ Ø¯Ø§Ø¦Ù…
- `needs_check`: ÙŠØ­ØªØ§Ø¬ ÙØ­Øµ

### 6. ÙˆØ­Ø¯Ø© Ø§Ù„Ø£Ù†Ø´Ø·Ø© (activity)
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:**
- ØªØ³Ø¬ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
- ØªØªØ¨Ø¹ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ
- Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

**Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ø¹ÙŠØ±:**
```python
# ØªØ³Ø¹ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
OperationPrice: 
  - patient.create: 10.00 Ø±ÙŠØ§Ù„
  - lab.test.*: 5.00 Ø±ÙŠØ§Ù„
  - *: 1.00 Ø±ÙŠØ§Ù„ (Ø§ÙØªØ±Ø§Ø¶ÙŠ)

# Ø³Ø¬Ù„ Ø§Ù„Ø£Ù†Ø´Ø·Ø©
ActivityLog:
  - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  - Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
  - Ø§Ù„ÙˆÙ‚Øª
  - Ø§Ù„ØªÙƒÙ„ÙØ©
```

---

## ğŸ” Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„Ø£Ø°ÙˆÙ†Ø§Øª

### Ø§Ù„Ø£Ø¯ÙˆØ§Ø± (Roles)
1. **Super Admin**: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ§Ù…Ù„Ø©
2. **Hospital Manager**: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰
3. **Doctor**: Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙˆØ§Ù„ØªØ´Ø®ÙŠØµ
4. **Nurse**: Ø§Ù„Ù…Ù…Ø±Ø¶ÙŠÙ† - Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ù…Ø±Ø¶Ù‰
5. **Receptionist**: Ù…ÙˆØ¸Ù Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø±Ø¶Ù‰
6. **Pharmacist**: Ø§Ù„ØµÙŠØ¯Ù„ÙŠ - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆÙŠØ©
7. **HR**: Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ© - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†

### Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª
```python
# ÙÙŠ settings.py
AUTH_USER_MODEL = "hr.CustomUser"
LOGIN_URL = reverse_lazy("superadmin:login")

# Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙÙŠ Views
@login_required
@user_passes_test(lambda u: u.role == 'doctor')
def doctor_view(request):
    # ÙƒÙˆØ¯ Ø®Ø§Øµ Ø¨Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ ÙÙ‚Ø·
```

### Ø·Ø±Ù‚ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù
1. **Fingerprint**: Ø¨ØµÙ…Ø© Ø§Ù„Ø¥ØµØ¨Ø¹
2. **Facial Print**: Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¬Ù‡
3. **Login/Logout**: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„/Ø§Ù„Ø®Ø±ÙˆØ¬
4. **KPI-Based**: Ø­Ø³Ø¨ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡

---

## ğŸ¨ ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

### Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
- **Bootstrap 5**: Ù„Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨
- **jQuery**: Ù„Ù„ØªÙØ§Ø¹Ù„
- **Chart.js**: Ù„Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©
- **DataTables**: Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
```
templates/
â”œâ”€â”€ base.html                 # Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
â”œâ”€â”€ patients/
â”‚   â”œâ”€â”€ patient_list.html     # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰
â”‚   â”œâ”€â”€ patient_detail.html   # ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø±ÙŠØ¶
â”‚   â””â”€â”€ patient_form.html     # Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„
â”œâ”€â”€ departments/
â”‚   â”œâ”€â”€ department_list.html  # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
â”‚   â””â”€â”€ department_node.html  # Ø¹Ø±Ø¶ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
â””â”€â”€ laboratory/
    â”œâ”€â”€ lab_request_list.html # Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø®ØªØ¨Ø±
    â””â”€â”€ test_results.html     # Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„
```

### Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©
- **Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù…**: ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
- **Ø§Ù„ÙÙ„ØªØ±Ø©**: Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ Ø§Ù„Ù‚Ø³Ù…ØŒ Ø§Ù„Ø­Ø§Ù„Ø©
- **Ø§Ù„ØªØµØ¯ÙŠØ±**: PDF, Excel
- **Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©**: ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø®ØµØµØ©
- **QR Code**: Ù„ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª

---

## ğŸš€ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

### Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„
```bash
# ØªØ«Ø¨ÙŠØª Python 3.8+
# ØªØ«Ø¨ÙŠØª pip

# Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ¦Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
pip install -r requirements.txt
```

### Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
```bash
# Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
python manage.py makemigrations
python manage.py migrate

# Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ø¯Ø§Ø±ÙŠ
python manage.py createsuperuser

# ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
python manage.py loaddata initial_data.json
```

### ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…
```bash
# ØªØ´ØºÙŠÙ„ Ø®Ø§Ø¯Ù… Ø§Ù„ØªØ·ÙˆÙŠØ±
python manage.py runserver

# Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù…
http://localhost:8000
```

### Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù‡Ù…Ø© ÙÙŠ settings.py
```python
# Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}

# Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©
LANGUAGES = (
    ('ar', 'Arabic'),
    ('en', 'English'),
)

# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ICD-11
ICD11_CLIENT_ID = "your-client-id"
ICD11_CLIENT_SECRET = "your-client-secret"
ICD11_XLSX_PATH = BASE_DIR / "core" / "static" / "icd" / "icd11.xlsx"
```

---

## âš¡ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©

### 1. ØªÙƒØ§Ù…Ù„ ICD-11
- ØªØµÙ†ÙŠÙ Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©
- Ø¨Ø­Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª ICD-11
- ØªØ±Ø¬Ù…Ø© Ø§Ù„ØªØ´Ø®ÙŠØµØ§Øª

### 2. Ù†Ø¸Ø§Ù… QR Code
```python
# Ø¥Ù†Ø´Ø§Ø¡ QR Code Ù„Ù„Ù…Ø±ÙŠØ¶
def generate_patient_qr(patient):
    qr = qrcode.make(f"patient:{patient.id}")
    # Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©
```

### 3. Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
- ØªÙ‚Ø§Ø±ÙŠØ± PDF Ù…Ø®ØµØµØ©
- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø©
- Ø±Ø³ÙˆÙ… Ø¨ÙŠØ§Ù†ÙŠØ© ØªÙØ§Ø¹Ù„ÙŠØ©

### 4. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©
- ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù„Ø£Ø¯ÙˆÙŠØ©
- ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯

### 5. API Ù„Ù„ØªÙƒØ§Ù…Ù„ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ
```python
# Ù…Ø«Ø§Ù„ API endpoint
@api_view(['GET'])
def patient_api(request, patient_id):
    patient = Patient.objects.get(id=patient_id)
    return Response(PatientSerializer(patient).data)
```

---

## ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

### Ø­Ø¬Ù… Ø§Ù„ÙƒÙˆØ¯
- **Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù„ÙØ§Øª**: 200+ Ù…Ù„Ù
- **Ø£Ø³Ø·Ø± Ø§Ù„ÙƒÙˆØ¯**: 15,000+ Ø³Ø·Ø±
- **Ø§Ù„Ù†Ù…Ø§Ø°Ø¬**: 50+ Ù†Ù…ÙˆØ°Ø¬
- **Ø§Ù„Ø¹Ø±ÙˆØ¶**: 100+ Ø¹Ø±Ø¶
- **Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨**: 80+ Ù‚Ø§Ù„Ø¨

### Ø§Ù„ÙˆØ­Ø¯Ø§Øª
- **8 ÙˆØ­Ø¯Ø§Øª Ø±Ø¦ÙŠØ³ÙŠØ©**
- **Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ø­Ø¯Ø© (SQLite)**
- **Ø¯Ø¹Ù… Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºØ§Øª (Ø¹Ø±Ø¨ÙŠ/Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)**

---

## ğŸ”§ Ø§Ù„ØµÙŠØ§Ù†Ø© ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±

### Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
```bash
# Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
python manage.py dumpdata > backup.json

# Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
python manage.py loaddata backup.json
```

### Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
1. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯
2. ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
3. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‡Ø¬Ø±Ø§Øª
4. ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶
5. ØªØµÙ…ÙŠÙ… Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨
6. Ø¥Ø¶Ø§ÙØ© URLs

### Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
```bash
# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
python manage.py test

# Ø§Ø®ØªØ¨Ø§Ø± ØªØ·Ø¨ÙŠÙ‚ Ù…Ø­Ø¯Ø¯
python manage.py test manager
```

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
1. **Ø®Ø·Ø£ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª**: ØªØ´ØºÙŠÙ„ migrate
2. **Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª**: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ø¯ÙˆØ§Ø±
3. **Ù…Ù„ÙØ§Øª Ù…ÙÙ‚ÙˆØ¯Ø©**: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† MEDIA_ROOT

### Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©
- [ ] ØªØ·Ø¨ÙŠÙ‚ Ø¬ÙˆØ§Ù„
- [ ] ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø£Ù†Ø¸Ù…Ø© Ø®Ø§Ø±Ø¬ÙŠØ©
- [ ] Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„ØªØ´Ø®ÙŠØµ
- [ ] Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

1. **Ø§Ù„Ø£Ù…Ø§Ù†**: ØªØºÙŠÙŠØ± SECRET_KEY ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
2. **Ø§Ù„Ø£Ø¯Ø§Ø¡**: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ù‚ÙˆÙ‰ Ù„Ù„Ø¥Ù†ØªØ§Ø¬
3. **Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©**: Ø¬Ø¯ÙˆÙ„Ø© Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù†ØªØ¸Ù…Ø©
4. **Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©**: ØªÙØ¹ÙŠÙ„ Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡

---

## ğŸ”— ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù€ Views ÙˆØ§Ù„Ù€ URLs ÙˆØ§Ù„Ù€ Signals

### ğŸ“„ Views (Ø§Ù„Ø¹Ø±ÙˆØ¶)

#### 1. Manager Views (Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰)
**Ø§Ù„Ù…Ù„Ù**: `manager/views.py` (2919 Ø³Ø·Ø±)

**Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©**:
- **PatientListView**: Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ Ù…Ø¹ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø©
- **PatientDetailView**: ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø±ÙŠØ¶ Ù…Ø¹ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©
- **PatientCreateView**: Ø¥Ø¶Ø§ÙØ© Ù…Ø±ÙŠØ¶ Ø¬Ø¯ÙŠØ¯
- **MedicalRecordCreateView**: Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ø·Ø¨ÙŠ Ø¬Ø¯ÙŠØ¯
- **PrescriptionCreateView**: Ø¥Ù†Ø´Ø§Ø¡ ÙˆØµÙØ© Ø·Ø¨ÙŠØ©
- **AdmissionCreateView**: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø±ÙŠØ¶ Ù„Ù„Ù…Ø³ØªØ´ÙÙ‰
- **DoctorListView**: Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡
- **BedListView**: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø±Ù‘Ø©
- **DepartmentViews**: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…

**Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø®Ø§ØµØ©**:
```python
# ØªØµØ¯ÙŠØ± PDF Ù„Ù„Ù…Ø±ÙŠØ¶
def download_patient_pdf(request, patient_id):
    # Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± PDF Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ø±ÙŠØ¶
    
# Ø¥Ù†Ø´Ø§Ø¡ QR Code Ù„Ù„Ù…Ø±ÙŠØ¶
def download_qr_code(request, patient_id):
    # Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ QR Ù„Ù„ØªØªØ¨Ø¹
    
# Ø·Ø¨Ø§Ø¹Ø© Ø³ÙˆØ§Ø± Ø§Ù„Ù…Ø±ÙŠØ¶
def download_wristband(request, patient_id):
    # Ø¥Ù†Ø´Ø§Ø¡ Ø³ÙˆØ§Ø± Ù…Ø¹ØµÙ… Ù„Ù„Ù…Ø±ÙŠØ¶ Ù…Ø¹ QR Code
```

**Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…**:
- ØªÙ‚Ø§Ø±ÙŠØ± PDF Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø±Ø¶Ù‰
- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ®ØµÙŠØµ
- ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ù†Ø¸Ø§Ù… ICD-11 Ù„Ù„ØªØ´Ø®ÙŠØµ

#### 2. HR Views (Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©)
**Ø§Ù„Ù…Ù„Ù**: `hr/views.py` (1040 Ø³Ø·Ø±)

**Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©**:
- **StaffListView**: Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù…Ø¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
- **StaffCreateView**: Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯
- **AttendanceListView**: Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù
- **PayrollListView**: ÙƒØ´ÙˆÙ Ø§Ù„Ø±ÙˆØ§ØªØ¨
- **ScheduleListView**: Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ù…Ù†Ø§ÙˆØ¨Ø§Øª
- **LeaveRequestListView**: Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª
- **BonusCreateView**: Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØ§ÙØ¢Øª
- **DeductionCreateView**: Ø¥Ø¶Ø§ÙØ© Ø®ØµÙˆÙ…Ø§Øª

**Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…**:
```python
# Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø­Ø¶ÙˆØ± Ù…Ù† Ø£Ø¬Ù‡Ø²Ø© ZKTeco
def sync_attendance_from_zkteco(request):
    # Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø¨ØµÙ…Ø©
    
# Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ÙˆØ§ØªØ¨ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
class PayrollCreateView(CreateView):
    # Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø§ØªØ¨ Ù…Ø¹ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª ÙˆØ§Ù„Ø®ØµÙˆÙ…Ø§Øª
```

#### 3. Laboratory Views (Ø§Ù„Ù…Ø®ØªØ¨Ø±Ø§Øª)
**Ø§Ù„Ù…Ù„Ù**: `laboratory/views.py` (1014 Ø³Ø·Ø±)

**Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©**:
- **LabRequestCreateView**: Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ ØªØ­Ù„ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
- **LabRequestListView**: Ù‚Ø§Ø¦Ù…Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„
- **TestResultListView**: Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„
- **TestGroupListView**: Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„
- **PatientLabResultsView**: Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø±ÙŠØ¶

**Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…**:
```python
# Ø¥Ø¶Ø§ÙØ© Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø·Ù„Ø¨
def add_results_for_request(request, request_id):
    # Ø¥Ù†Ø´Ø§Ø¡ Ù†ØªØ§Ø¦Ø¬ Ù…Ø¨Ø¯Ø¦ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
    
# Ø·Ø¨Ø§Ø¹Ø© Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø±ÙŠØ¶
def patient_lab_results_print(request, patient_id):
    # ØªÙ‚Ø±ÙŠØ± PDF Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø®ØªØ¨Ø±
```

#### 4. Maintenance Views (Ø§Ù„ØµÙŠØ§Ù†Ø©)
**Ø§Ù„Ù…Ù„Ù**: `maintenance/views.py` (476 Ø³Ø·Ø±)

**Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©**:
- **device_list**: Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ù…Ø¹ Ø§Ù„ÙÙ„ØªØ±Ø©
- **clean_device**: ØªØ³Ø¬ÙŠÙ„ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¬Ù‡Ø§Ø²
- **sterilize_device**: ØªØ³Ø¬ÙŠÙ„ ØªØ¹Ù‚ÙŠÙ… Ø§Ù„Ø¬Ù‡Ø§Ø²
- **perform_maintenance**: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙŠØ§Ù†Ø©
- **transfer_device**: Ù†Ù‚Ù„ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
- **assign_device**: ØªØ®ØµÙŠØµ Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„Ù„Ù…Ø±ÙŠØ¶

**Ù†Ø¸Ø§Ù… Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…**:
```python
# ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ†Ø¸ÙŠÙ
def cleaning_history(request, device_id):
    logs = device.cleaning_logs.all()
    
# ØªØ§Ø±ÙŠØ® Ø§Ù„ØµÙŠØ§Ù†Ø©
def maintenance_history(request, device_id):
    logs = device.maintenance_logs.all()
```

### ğŸ›£ï¸ URLs (Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª)

#### 1. Manager URLs
**Ø§Ù„Ù…Ù„Ù**: `manager/urls.py` (276 Ø³Ø·Ø±)

**Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©**:
```python
urlpatterns = [
    # Ø§Ù„Ù…Ø±Ø¶Ù‰
    path("", PatientListView.as_view(), name="patient_list"),
    path("create/", PatientCreateView.as_view(), name="patient_create"),
    path("<int:pk>/", PatientDetailView.as_view(), name="patient_detail"),
    
    # Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø·Ø¨Ø§Ø¹Ø©
    path("<int:patient_id>/pdf/", download_patient_pdf, name="patient_pdf"),
    path("<int:patient_id>/wristband/", download_wristband, name="download_wristband"),
    path("<int:patient_id>/qrcode/", download_qr_code, name="download_qr_code"),
    
    # Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙˆØ§Ù„Ù†Ù‚Ù„
    path("admissions/", AdmissionListView.as_view(), name="admission_list"),
    path("admissions/new/", AdmissionCreateView.as_view(), name="admission_create"),
    
    # Ø§Ù„ÙˆØµÙØ§Øª Ø§Ù„Ø·Ø¨ÙŠØ©
    path("prescriptions/list/", PrescriptionListView.as_view(), name="prescription_list"),
    path("prescriptions/<int:pk>/", PrescriptionDetailView.as_view(), name="prescription_detail"),
    
    # Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ§Ù„Ù‡ÙŠÙƒÙ„
    path("departments/", department_list, name="department_list"),
    path("departments/add/", add_department, name="department_add"),
    path("departments/<int:department_id>/devices/", department_devices, name="department_devices"),
    
    # AJAX Ù„Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
    path("ajax/load-floors/", ajax_load_floors, name="ajax_load_floors"),
    path("ajax/load-wards/", ajax_load_wards, name="ajax_load_wards"),
    path("ajax/load-rooms/", ajax_load_rooms, name="ajax_load_rooms"),
    
    # ICD-11 Ù„Ù„ØªØ´Ø®ÙŠØµ
    path("ajax/icd11-autocomplete/", icd11_autocomplete, name="icd11_autocomplete"),
]
```

#### 2. HR URLs
**Ø§Ù„Ù…Ù„Ù**: `hr/urls.py` (78 Ø³Ø·Ø±)

```python
urlpatterns = [
    # ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    path('login/', CommonLoginView.as_view(), name='login'),
    
    # Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
    path('staff/', StaffListView.as_view(), name='staff_list'),
    path('staff/new/', StaffCreateView.as_view(), name='staff_create'),
    path('staff/<int:pk>/', StaffDetailView.as_view(), name='staff_detail'),
    
    # Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø§Ù†ØµØ±Ø§Ù
    path('attendance/', AttendanceListView.as_view(), name='attendance_list'),
    path('attendance/sync/', sync_attendance_from_zkteco, name='sync_attendance'),
    
    # Ø§Ù„Ø±ÙˆØ§ØªØ¨
    path('payroll/', PayrollListView.as_view(), name='payroll_list'),
    path('payroll/bonus/create/', GlobalBonusCreateView.as_view(), name='global_bonus_create'),
    path('payroll/deduction/create/', GlobalDeductionCreateView.as_view(), name='global_deduction_create'),
    
    # Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª
    path('leave-requests/', LeaveRequestListView.as_view(), name='leave_request_list'),
    path('leave-requests/new/', LeaveRequestCreateView.as_view(), name='leave_request_create'),
    
    # Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø§Øª
    path('schedules/', ScheduleListView.as_view(), name='schedule_list'),
    path('shifts/', ShiftAssignmentListView.as_view(), name='shift_assignment_list'),
]
```

#### 3. Laboratory URLs
**Ø§Ù„Ù…Ù„Ù**: `laboratory/urls.py` (134 Ø³Ø·Ø±)

```python
urlpatterns = [
    # Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø®ØªØ¨Ø±
    path("lab-request/new/<int:patient_id>/", LabRequestCreateView.as_view(), name="lab_request_add"),
    path("requests/", LabRequestListView.as_view(), name="lab_request_list"),
    path("requests/<int:pk>/", LabRequestDetailView.as_view(), name="lab_request_detail"),
    
    # Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„
    path("tests/", TestListView.as_view(), name="test_list"),
    path("tests/new/", TestCreateView.as_view(), name="test_create"),
    
    # Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„
    path("test-groups/", TestGroupListView.as_view(), name="testgroup_list"),
    path("test-groups/new/", TestGroupCreateView.as_view(), name="testgroup_create"),
    
    # Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø±ÙŠØ¶
    path("patients/<int:patient_id>/results/", PatientLabResultsView.as_view(), name="patient_lab_results"),
    path("patients/<int:patient_id>/results/print/", patient_lab_results_print, name="patient_lab_results_print"),
    
    # Ù…Ø³Ø­ QR Code
    path("requests/scan/<uuid:token>/", lab_request_scan, name="lab_request_scan"),
    path("samples/scan/<uuid:token>/", sample_scan, name="sample_scan"),
]
```

### ğŸ“¡ Signals (Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª)

#### 1. Manager Signals
**Ø§Ù„Ù…Ù„Ù**: `manager/signals.py` (61 Ø³Ø·Ø±)

```python
# Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø³Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ´ÙÙ‰ Ø¬Ø¯ÙŠØ¯
@receiver(post_save, sender=Hospital)
def create_main_surgical_department(sender, instance, created, **kwargs):
    if created:
        main_dept = Department.objects.create(
            name='Ù‚Ø³Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¬Ø±Ø§Ø­ÙŠØ©',
            hospital=instance,
            parent=None
        )
        SurgicalOperationsDepartment.objects.create(
            name='ØºØ±Ù Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª',
            surgical_type='Ø¹Ø§Ù…',
            location='Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø£Ø±Ø¶ÙŠ',
            hospital=instance,
            department=main_dept
        )

# Ø¥Ù†Ø´Ø§Ø¡ Ø²ÙŠØ§Ø±Ø© OPD ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„ÙƒÙ„ Ù…Ø±ÙŠØ¶ Ø¬Ø¯ÙŠØ¯
@receiver(post_save, sender=Patient)
def create_opd_visit(sender, instance, created, **kwargs):
    if not created:
        return
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø³Ù… OPD Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
    opd_dept, _ = Department.objects.get_or_create(
        hospital=instance.hospital,
        name="OPD",
        defaults={
            "department_type": "department",
            "is_active": True,
        },
    )
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ø²ÙŠØ§Ø±Ø© Ø®Ø§Ø±Ø¬ÙŠØ©
    Visit.objects.create(
        patient=instance,
        hospital=instance.hospital,
        department=opd_dept,
        visit_type="outpatient",
        visit_date=timezone.now(),
        status="active",
    )
```

#### 2. Activity Signals
**Ø§Ù„Ù…Ù„Ù**: `activity/signals.py` (11 Ø³Ø·Ø±)

```python
# ØªØ³Ø¬ÙŠÙ„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
@receiver(user_logged_in)
def on_login(sender, request, user, **kwargs):
    emit_activity("auth.login", user=user, action="login", 
                 extra={"username": user.get_username()})

# ØªØ³Ø¬ÙŠÙ„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
@receiver(user_logged_out)
def on_logout(sender, request, user, **kwargs):
    emit_activity("auth.logout", user=user, action="logout", 
                 extra={"username": getattr(user, "username", None)})
```

### ğŸ”§ Mixins (Ø§Ù„Ø®Ù„Ø·Ø§Øª)

#### 1. Manager Mixins
**Ø§Ù„Ù…Ù„Ù**: `manager/mixins.py` (14 Ø³Ø·Ø±)

```python
class HospitalmanagerRequiredMixin(LoginRequiredMixin, UserPassesTestMixin):
    """
    ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ ÙÙ‚Ø· Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØµØ§Ø¯Ù‚ Ø¹Ù„ÙŠÙ‡Ù… ÙˆØ§Ù„Ù…Ø±ØªØ¨Ø·ÙŠÙ† Ø¨Ù…Ø³ØªØ´ÙÙ‰.
    """
    def test_func(self):
        user = self.request.user
        return user.is_authenticated and hasattr(user, "hospital")
```

#### 2. Activity Mixins
**Ø§Ù„Ù…Ù„Ù**: `activity/mixins.py`

```python
class ActivityTrackingMixin:
    """
    ØªØªØ¨Ø¹ Ø§Ù„Ø£Ù†Ø´Ø·Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª CRUD
    """
    def form_valid(self, form):
        response = super().form_valid(form)
        emit_activity(
            operation_key=f"{self.model._meta.label_lower}.create",
            user=self.request.user,
            content_object=self.object
        )
        return response
```

## ğŸ¯ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© ÙÙŠ Views

### 1. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø©
```python
# ÙÙŠ PatientListView
def get_queryset(self):
    queryset = Patient.objects.filter(hospital=self.request.user.hospital)
    search = self.request.GET.get('search')
    if search:
        queryset = queryset.filter(
            Q(first_name__icontains=search) |
            Q(last_name__icontains=search) |
            Q(national_id__icontains=search)
        )
    return queryset
```

### 2. AJAX Ù„Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
```python
# ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØºØ±Ù Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù…
def ajax_load_rooms(request):
    department_id = request.GET.get('department')
    rooms = Room.objects.filter(ward__floor__building__department_id=department_id)
    return JsonResponse({
        'rooms': [{'id': r.id, 'name': r.name} for r in rooms]
    })
```

### 3. ØªØµØ¯ÙŠØ± PDF Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
```python
# Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± PDF Ù„Ù„Ù…Ø±ÙŠØ¶
def download_patient_pdf(request, patient_id):
    patient = get_object_or_404(Patient, pk=patient_id)
    
    # Ø¥Ù†Ø´Ø§Ø¡ PDF Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ReportLab
    buffer = BytesIO()
    doc = SimpleDocTemplate(buffer, pagesize=letter)
    
    # Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰
    story = []
    story.append(Paragraph(f"ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø±ÙŠØ¶: {patient.full_name}", title_style))
    
    # Ø¨Ù†Ø§Ø¡ PDF ÙˆØ¥Ø±Ø¬Ø§Ø¹Ù‡
    doc.build(story)
    buffer.seek(0)
    
    response = HttpResponse(buffer, content_type='application/pdf')
    response['Content-Disposition'] = f'attachment; filename="patient_{patient.id}.pdf"'
    return response
```

### 4. Ù†Ø¸Ø§Ù… QR Code Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
```python
# Ø¥Ù†Ø´Ø§Ø¡ QR Code Ù„Ù„Ù…Ø±ÙŠØ¶
def download_qr_code(request, patient_id):
    patient = get_object_or_404(Patient, pk=patient_id)
    
    # Ø¥Ù†Ø´Ø§Ø¡ QR Code
    qr = qrcode.QRCode(version=1, box_size=10, border=5)
    qr.add_data(f"patient:{patient.id}:{patient.mrn}")
    qr.make(fit=True)
    
    # ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ØµÙˆØ±Ø©
    img = qr.make_image(fill_color="black", back_color="white")
    
    # Ø¥Ø±Ø¬Ø§Ø¹ ÙƒÙ€ HTTP Response
    response = HttpResponse(content_type="image/png")
    img.save(response, "PNG")
    return response
```

## ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙØµÙ„Ø©

### Views
- **manager/views.py**: 2919 Ø³Ø·Ø±ØŒ 267 Ø¯Ø§Ù„Ø©/ÙØ¦Ø©
- **hr/views.py**: 1040 Ø³Ø·Ø±ØŒ 148 Ø¯Ø§Ù„Ø©/ÙØ¦Ø©  
- **laboratory/views.py**: 1014 Ø³Ø·Ø±ØŒ 85 Ø¯Ø§Ù„Ø©/ÙØ¦Ø©
- **maintenance/views.py**: 476 Ø³Ø·Ø±ØŒ 49 Ø¯Ø§Ù„Ø©
- **Ø¥Ø¬Ù…Ø§Ù„ÙŠ Views**: 5449+ Ø³Ø·Ø±

### URLs
- **manager/urls.py**: 276 Ø³Ø·Ø±ØŒ 80+ Ù…Ø³Ø§Ø±
- **hr/urls.py**: 78 Ø³Ø·Ø±ØŒ 25+ Ù…Ø³Ø§Ø±
- **laboratory/urls.py**: 134 Ø³Ø·Ø±ØŒ 30+ Ù…Ø³Ø§Ø±
- **Ø¥Ø¬Ù…Ø§Ù„ÙŠ URLs**: 488+ Ø³Ø·Ø±ØŒ 135+ Ù…Ø³Ø§Ø±

### Signals & Mixins
- **manager/signals.py**: 61 Ø³Ø·Ø±ØŒ 2 Ø¥Ø´Ø§Ø±Ø©
- **activity/signals.py**: 11 Ø³Ø·Ø±ØŒ 2 Ø¥Ø´Ø§Ø±Ø©
- **manager/mixins.py**: 14 Ø³Ø·Ø±ØŒ 1 mixin
- **Ø¥Ø¬Ù…Ø§Ù„ÙŠ**: 86+ Ø³Ø·Ø±

---

*ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¯Ù„ÙŠÙ„ ÙÙŠ: 2025-08-22*
*Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù…: 1.0*
*Ø§Ù„Ù…Ø·ÙˆØ±: ÙØ±ÙŠÙ‚ ØªØ·ÙˆÙŠØ± HMS*
