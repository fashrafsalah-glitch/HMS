# Generated by Django 5.2.5 on 2025-08-25 07:13

import datetime
import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('maintenance', '0012_devicecleaninglog_devicemaintenancelog_and_more'),
        ('manager', '0022_bed_qr_code_bed_qr_token_patient_qr_code_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='CalibrationStandard',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('standard_number', models.CharField(max_length=100, unique=True)),
                ('issuing_body', models.CharField(max_length=200)),
                ('issue_date', models.DateField()),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('document_file', models.FileField(blank=True, null=True, upload_to='calibration_standards/')),
            ],
        ),
        migrations.AddField(
            model_name='device',
            name='qr_code',
            field=models.ImageField(blank=True, null=True, upload_to='qr_codes/'),
        ),
        migrations.AddField(
            model_name='device',
            name='qr_token',
            field=models.CharField(blank=True, max_length=200, null=True, unique=True),
        ),
        migrations.CreateModel(
            name='Calibration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scheduled_date', models.DateField()),
                ('performed_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('scheduled', 'مجدول'), ('in_progress', 'قيد التنفيذ'), ('completed', 'مكتمل'), ('failed', 'فشل'), ('cancelled', 'ملغي')], default='scheduled', max_length=20)),
                ('results', models.TextField(blank=True, null=True)),
                ('next_calibration_date', models.DateField(blank=True, null=True)),
                ('certificate_number', models.CharField(blank=True, max_length=100, null=True)),
                ('certificate_file', models.FileField(blank=True, null=True, upload_to='calibration_certificates/')),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='calibrations', to='maintenance.device')),
                ('performed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='performed_calibrations', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='CalibrationRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('calibration_date', models.DateField(verbose_name='تاريخ المعايرة')),
                ('next_calibration_date', models.DateField(verbose_name='تاريخ المعايرة التالية')),
                ('calibration_interval_months', models.PositiveIntegerField(default=12, verbose_name='فترة المعايرة بالشهور')),
                ('certificate_number', models.CharField(blank=True, max_length=100, verbose_name='رقم الشهادة')),
                ('calibration_agency', models.CharField(blank=True, max_length=200, verbose_name='جهة المعايرة')),
                ('status', models.CharField(choices=[('due', 'مستحق'), ('overdue', 'متأخر'), ('completed', 'مكتمل'), ('not_required', 'غير مطلوب')], default='completed', max_length=20, verbose_name='حالة المعايرة')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('certificate_file', models.FileField(blank=True, null=True, upload_to='calibration_certificates/', verbose_name='ملف الشهادة')),
                ('cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='التكلفة')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('calibrated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='calibrations_performed', to=settings.AUTH_USER_MODEL, verbose_name='تم المعايرة بواسطة')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='calibration_records', to='maintenance.device', verbose_name='الجهاز')),
            ],
            options={
                'verbose_name': 'سجل معايرة',
                'verbose_name_plural': 'سجلات المعايرة',
                'ordering': ['-calibration_date'],
            },
        ),
        migrations.CreateModel(
            name='DeviceAccessory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('qr_code', models.ImageField(blank=True, null=True, upload_to='qr_codes/')),
                ('qr_token', models.CharField(blank=True, max_length=200, null=True, unique=True)),
                ('name', models.CharField(max_length=255, verbose_name='اسم الملحق')),
                ('description', models.TextField(blank=True, null=True, verbose_name='الوصف')),
                ('serial_number', models.CharField(blank=True, max_length=100, null=True, unique=True, verbose_name='الرقم التسلسلي')),
                ('model', models.CharField(blank=True, max_length=100, null=True, verbose_name='الموديل')),
                ('manufacturer', models.CharField(blank=True, max_length=100, null=True, verbose_name='الشركة المصنعة')),
                ('purchase_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الشراء')),
                ('warranty_expiry', models.DateField(blank=True, null=True, verbose_name='انتهاء الضمان')),
                ('status', models.CharField(choices=[('available', 'متاح'), ('in_use', 'قيد الاستخدام'), ('maintenance', 'تحت الصيانة'), ('damaged', 'تالف'), ('lost', 'مفقود')], default='available', max_length=20, verbose_name='الحالة')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='accessories', to='maintenance.device', verbose_name='الجهاز')),
            ],
            options={
                'verbose_name': 'ملحق الجهاز',
                'verbose_name_plural': 'ملحقات الأجهزة',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='AccessoryTransferRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('requested_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الطلب')),
                ('reason', models.TextField(blank=True, null=True, verbose_name='سبب النقل')),
                ('is_approved', models.BooleanField(default=False, verbose_name='موافق عليه؟')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الموافقة')),
                ('rejection_reason', models.TextField(blank=True, null=True, verbose_name='سبب الرفض')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfer_approved_by', to=settings.AUTH_USER_MODEL, verbose_name='وافق عليه')),
                ('from_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfer_requests_from', to='manager.department', verbose_name='من القسم')),
                ('from_device', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfers_from', to='maintenance.device', verbose_name='من الجهاز')),
                ('from_room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfers_from', to='manager.room', verbose_name='من الغرفة')),
                ('requested_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfer_requested_by', to=settings.AUTH_USER_MODEL, verbose_name='طلب بواسطة')),
                ('to_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfer_requests_to', to='manager.department', verbose_name='إلى القسم')),
                ('to_device', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfers_to', to='maintenance.device', verbose_name='إلى الجهاز')),
                ('to_room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfers_to', to='manager.room', verbose_name='إلى الغرفة')),
                ('accessory', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfer_requests', to='maintenance.deviceaccessory', verbose_name='الملحق')),
            ],
            options={
                'verbose_name': 'طلب نقل ملحق',
                'verbose_name_plural': 'طلبات نقل الملحقات',
                'ordering': ['-requested_at'],
            },
        ),
        migrations.CreateModel(
            name='AccessoryTransferLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('transferred_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ النقل')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('from_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfer_logs_from', to='manager.department', verbose_name='من القسم')),
                ('from_device', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfer_logs_from', to='maintenance.device', verbose_name='من الجهاز')),
                ('from_room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfer_logs_from', to='manager.room', verbose_name='من الغرفة')),
                ('to_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfer_logs_to', to='manager.department', verbose_name='إلى القسم')),
                ('to_device', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfer_logs_to', to='maintenance.device', verbose_name='إلى الجهاز')),
                ('to_room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transfer_logs_to', to='manager.room', verbose_name='إلى الغرفة')),
                ('transferred_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='نُقل بواسطة')),
                ('accessory', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfer_logs', to='maintenance.deviceaccessory', verbose_name='الملحق')),
            ],
            options={
                'verbose_name': 'سجل نقل ملحق',
                'verbose_name_plural': 'سجلات نقل الملحقات',
                'ordering': ['-transferred_at'],
            },
        ),
        migrations.CreateModel(
            name='AccessoryTransaction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('transaction_type', models.CharField(choices=[('handover', 'تسليم'), ('receipt', 'استلام'), ('transfer', 'نقل'), ('maintenance', 'صيانة'), ('return', 'إرجاع')], default='handover', max_length=20, verbose_name='نوع العملية')),
                ('notes', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('scanned_barcode', models.CharField(blank=True, max_length=200, null=True, verbose_name='الباركود الممسوح')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ العملية')),
                ('is_confirmed', models.BooleanField(default=False, verbose_name='مؤكدة؟')),
                ('confirmed_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ التأكيد')),
                ('from_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transactions_from', to='manager.department', verbose_name='من القسم')),
                ('from_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transactions_from', to=settings.AUTH_USER_MODEL, verbose_name='من المستخدم')),
                ('to_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='accessory_transactions_to', to='manager.department', verbose_name='إلى القسم')),
                ('to_user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='accessory_transactions_to', to=settings.AUTH_USER_MODEL, verbose_name='إلى المستخدم')),
                ('accessory', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transactions', to='maintenance.deviceaccessory', verbose_name='الملحق')),
            ],
            options={
                'verbose_name': 'معاملة ملحق',
                'verbose_name_plural': 'معاملات الملحقات',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DeviceDailyUsageLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(auto_now_add=True)),
                ('total_usage_time', models.DurationField(default=datetime.timedelta)),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='daily_usage_logs', to='maintenance.device')),
            ],
        ),
        migrations.CreateModel(
            name='DeviceDowntime',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('start_time', models.DateTimeField()),
                ('end_time', models.DateTimeField(blank=True, null=True)),
                ('reason', models.CharField(choices=[('breakdown', 'عطل'), ('maintenance', 'صيانة'), ('calibration', 'معايرة'), ('power_outage', 'انقطاع التيار'), ('operator_error', 'خطأ المشغل'), ('scheduled_downtime', 'توقف مجدول'), ('other', 'أخرى')], max_length=50)),
                ('description', models.TextField()),
                ('resolution_notes', models.TextField(blank=True, null=True)),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='downtimes', to='maintenance.device')),
                ('reported_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reported_downtimes', to=settings.AUTH_USER_MODEL)),
                ('resolved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='resolved_downtimes', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='DeviceHandoverLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('handed_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ التسليم')),
                ('note', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='handover_logs', to='maintenance.device', verbose_name='الجهاز')),
                ('from_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='device_handovers_from', to=settings.AUTH_USER_MODEL, verbose_name='من المستخدم')),
                ('to_user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='device_handovers_to', to=settings.AUTH_USER_MODEL, verbose_name='إلى المستخدم')),
            ],
            options={
                'verbose_name': 'سجل تسليم الجهاز',
                'verbose_name_plural': 'سجلات تسليم الأجهزة',
                'ordering': ['-handed_at'],
            },
        ),
        migrations.CreateModel(
            name='DeviceTransfer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('from_department', models.CharField(max_length=255)),
                ('to_department', models.CharField(max_length=255)),
                ('transfer_date', models.DateField()),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='maintenance.device')),
            ],
        ),
        migrations.CreateModel(
            name='DeviceTransferLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('moved_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ النقل')),
                ('note', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfer_logs', to='maintenance.device', verbose_name='الجهاز')),
                ('from_bed', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='device_transfers_from', to='manager.bed', verbose_name='من السرير')),
                ('from_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='device_transfers_from', to='manager.department', verbose_name='من القسم')),
                ('from_room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='device_transfers_from', to='manager.room', verbose_name='من الغرفة')),
                ('moved_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='نُقل بواسطة')),
                ('to_bed', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='device_transfers_to', to='manager.bed', verbose_name='إلى السرير')),
                ('to_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='device_transfers_to', to='manager.department', verbose_name='إلى القسم')),
                ('to_room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='device_transfers_to', to='manager.room', verbose_name='إلى الغرفة')),
            ],
            options={
                'verbose_name': 'سجل نقل الجهاز',
                'verbose_name_plural': 'سجلات نقل الأجهزة',
                'ordering': ['-moved_at'],
            },
        ),
        migrations.CreateModel(
            name='DeviceUsageLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(verbose_name='التاريخ')),
                ('shift', models.CharField(choices=[('morning', 'صباحي'), ('evening', 'مسائي'), ('night', 'ليلي')], default='morning', max_length=20, verbose_name='الوردية')),
                ('pre_use_check', models.BooleanField(default=False, verbose_name='تفقد ما قبل الاستخدام')),
                ('post_use_check', models.BooleanField(default=False, verbose_name='تفقد ما بعد الاستخدام')),
                ('operational_status', models.CharField(choices=[('working', 'يعمل بشكل طبيعي'), ('minor_issues', 'مشاكل بسيطة'), ('major_issues', 'مشاكل كبيرة'), ('not_working', 'لا يعمل')], default='working', max_length=20, verbose_name='حالة التشغيل')),
                ('usage_hours', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='ساعات الاستخدام')),
                ('patient_count', models.PositiveIntegerField(blank=True, null=True, verbose_name='عدد المرضى')),
                ('issues_found', models.TextField(blank=True, verbose_name='المشاكل المكتشفة')),
                ('maintenance_needed', models.BooleanField(default=False, verbose_name='يحتاج صيانة')),
                ('cleaning_done', models.BooleanField(default=False, verbose_name='تم التنظيف')),
                ('sterilization_done', models.BooleanField(default=False, verbose_name='تم التعقيم')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('checked_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='تم التفقد بواسطة')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='usage_logs', to='maintenance.device', verbose_name='الجهاز')),
            ],
            options={
                'verbose_name': 'سجل استخدام',
                'verbose_name_plural': 'سجلات الاستخدام',
                'ordering': ['-date', '-shift'],
                'unique_together': {('device', 'date', 'shift')},
            },
        ),
        migrations.CreateModel(
            name='FailureAnalysisReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('analysis_date', models.DateField()),
                ('failure_description', models.TextField()),
                ('root_cause', models.TextField()),
                ('corrective_actions', models.TextField()),
                ('preventive_measures', models.TextField()),
                ('attachments', models.FileField(blank=True, null=True, upload_to='failure_analysis/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('analyzed_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='failure_reports', to='maintenance.device')),
                ('downtime', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='analysis_reports', to='maintenance.devicedowntime')),
            ],
        ),
        migrations.CreateModel(
            name='JobPlan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم خطة العمل')),
                ('description', models.TextField(verbose_name='وصف خطة العمل')),
                ('job_type', models.CharField(choices=[('corrective', 'صيانة تصحيحية'), ('preventive', 'صيانة وقائية'), ('inspection', 'فحص'), ('calibration', 'معايرة'), ('upgrade', 'ترقية'), ('installation', 'تركيب'), ('other', 'أخرى')], max_length=20, verbose_name='نوع العمل')),
                ('estimated_hours', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='الساعات المقدرة')),
                ('instructions', models.TextField(verbose_name='تعليمات العمل')),
                ('safety_notes', models.TextField(blank=True, verbose_name='ملاحظات السلامة')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='تم الإنشاء بواسطة')),
                ('device_category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='job_plans', to='maintenance.devicecategory', verbose_name='فئة الجهاز')),
            ],
            options={
                'verbose_name': 'خطة عمل',
                'verbose_name_plural': 'خطط العمل',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='NotificationPreference',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('email_enabled', models.BooleanField(default=True, verbose_name='تفعيل الإيميل')),
                ('email_service_requests', models.BooleanField(default=True, verbose_name='طلبات الخدمة عبر الإيميل')),
                ('email_work_orders', models.BooleanField(default=True, verbose_name='أوامر العمل عبر الإيميل')),
                ('email_preventive_maintenance', models.BooleanField(default=True, verbose_name='الصيانة الوقائية عبر الإيميل')),
                ('email_sla_breaches', models.BooleanField(default=True, verbose_name='خرق اتفاقيات الخدمة عبر الإيميل')),
                ('app_enabled', models.BooleanField(default=True, verbose_name='تفعيل إشعارات التطبيق')),
                ('app_service_requests', models.BooleanField(default=True, verbose_name='طلبات الخدمة في التطبيق')),
                ('app_work_orders', models.BooleanField(default=True, verbose_name='أوامر العمل في التطبيق')),
                ('app_preventive_maintenance', models.BooleanField(default=True, verbose_name='الصيانة الوقائية في التطبيق')),
                ('app_sla_breaches', models.BooleanField(default=True, verbose_name='خرق اتفاقيات الخدمة في التطبيق')),
                ('digest_frequency', models.CharField(choices=[('immediate', 'فوري'), ('hourly', 'كل ساعة'), ('daily', 'يومي'), ('weekly', 'أسبوعي')], default='immediate', max_length=20, verbose_name='تكرار الملخص')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='notification_preferences', to=settings.AUTH_USER_MODEL, verbose_name='المستخدم')),
            ],
            options={
                'verbose_name': 'تفضيلات الإشعارات',
                'verbose_name_plural': 'تفضيلات الإشعارات',
            },
        ),
        migrations.CreateModel(
            name='PatientTransferLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('moved_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ النقل')),
                ('note', models.TextField(blank=True, null=True, verbose_name='ملاحظات')),
                ('from_bed', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='patient_transfers_from', to='manager.bed', verbose_name='من السرير')),
                ('from_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='patient_transfers_from', to='manager.department', verbose_name='من القسم')),
                ('from_room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='patient_transfers_from', to='manager.room', verbose_name='من الغرفة')),
                ('moved_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='نُقل بواسطة')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfer_logs', to='manager.patient', verbose_name='المريض')),
                ('to_bed', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='patient_transfers_to', to='manager.bed', verbose_name='إلى السرير')),
                ('to_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='patient_transfers_to', to='manager.department', verbose_name='إلى القسم')),
                ('to_room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='patient_transfers_to', to='manager.room', verbose_name='إلى الغرفة')),
            ],
            options={
                'verbose_name': 'سجل نقل المريض',
                'verbose_name_plural': 'سجلات نقل المرضى',
                'ordering': ['-moved_at'],
            },
        ),
        migrations.CreateModel(
            name='PreventiveMaintenanceSchedule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم الجدولة')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('frequency', models.CharField(choices=[('daily', 'يومي'), ('weekly', 'أسبوعي'), ('monthly', 'شهري'), ('quarterly', 'ربع سنوي'), ('semi_annual', 'نصف سنوي'), ('annual', 'سنوي'), ('custom', 'مخصص')], max_length=20, verbose_name='التكرار')),
                ('interval_days', models.PositiveIntegerField(blank=True, null=True, verbose_name='الفترة بالأيام')),
                ('start_date', models.DateField(verbose_name='تاريخ البدء')),
                ('end_date', models.DateField(blank=True, null=True, verbose_name='تاريخ الانتهاء')),
                ('next_due_date', models.DateField(verbose_name='تاريخ الاستحقاق التالي')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='pm_schedules', to=settings.AUTH_USER_MODEL, verbose_name='مُعين إلى')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='تم الإنشاء بواسطة')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pm_schedules', to='maintenance.device', verbose_name='الجهاز')),
                ('job_plan', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pm_schedules', to='maintenance.jobplan', verbose_name='خطة العمل')),
            ],
            options={
                'verbose_name': 'جدولة صيانة وقائية',
                'verbose_name_plural': 'جدولة الصيانة الوقائية',
                'ordering': ['next_due_date'],
            },
        ),
        migrations.CreateModel(
            name='ScanSession',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session_id', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('status', models.CharField(choices=[('active', 'نشطة'), ('completed', 'مكتملة'), ('cancelled', 'ملغاة')], default='active', max_length=20, verbose_name='الحالة')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('bed', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='manager.bed', verbose_name='السرير')),
                ('patient', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='manager.patient', verbose_name='المريض')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='المستخدم')),
            ],
            options={
                'verbose_name': 'جلسة مسح',
                'verbose_name_plural': 'جلسات المسح',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ScanHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scanned_code', models.CharField(max_length=100, verbose_name='الكود الممسوح')),
                ('entity_type', models.CharField(max_length=50, verbose_name='نوع الكيان')),
                ('entity_id', models.IntegerField(verbose_name='معرف الكيان')),
                ('entity_data', models.JSONField(default=dict, verbose_name='بيانات الكيان')),
                ('scanned_at', models.DateTimeField(auto_now_add=True, verbose_name='وقت المسح')),
                ('is_valid', models.BooleanField(default=True, verbose_name='صالح؟')),
                ('error_message', models.CharField(blank=True, max_length=255, null=True, verbose_name='رسالة الخطأ')),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='scan_history', to='maintenance.scansession', verbose_name='الجلسة')),
            ],
            options={
                'verbose_name': 'تاريخ المسح',
                'verbose_name_plural': 'تاريخ المسح',
                'ordering': ['-scanned_at'],
            },
        ),
        migrations.CreateModel(
            name='ServiceRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='عنوان البلاغ')),
                ('description', models.TextField(verbose_name='وصف المشكلة')),
                ('request_type', models.CharField(choices=[('breakdown', 'عطل'), ('preventive', 'صيانة وقائية'), ('inspection', 'فحص'), ('upgrade', 'ترقية'), ('installation', 'تركيب'), ('other', 'أخرى')], default='breakdown', max_length=20, verbose_name='نوع البلاغ')),
                ('severity', models.CharField(choices=[('critical', 'حرج'), ('high', 'عالي'), ('medium', 'متوسط'), ('low', 'منخفض')], default='medium', max_length=20, verbose_name='درجة الخطورة')),
                ('impact', models.CharField(choices=[('extensive', 'واسع'), ('significant', 'كبير'), ('moderate', 'متوسط'), ('minor', 'بسيط')], default='moderate', max_length=20, verbose_name='التأثير')),
                ('priority', models.CharField(choices=[('urgent', 'عاجل'), ('high', 'عالي'), ('medium', 'متوسط'), ('low', 'منخفض')], default='medium', max_length=20, verbose_name='الأولوية')),
                ('status', models.CharField(choices=[('new', 'جديد'), ('in_progress', 'جاري العمل'), ('on_hold', 'معلق'), ('resolved', 'تم الحل'), ('closed', 'مغلق'), ('cancelled', 'ملغي')], default='new', max_length=20, verbose_name='الحالة')),
                ('response_due', models.DateTimeField(blank=True, null=True, verbose_name='موعد الاستجابة المطلوب')),
                ('resolution_due', models.DateTimeField(blank=True, null=True, verbose_name='موعد الحل المطلوب')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('resolved_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الحل')),
                ('closed_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الإغلاق')),
                ('estimated_hours', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='الساعات المقدرة')),
                ('actual_hours', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='الساعات الفعلية')),
                ('cost_estimate', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='التكلفة المقدرة')),
                ('actual_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='التكلفة الفعلية')),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_requests', to=settings.AUTH_USER_MODEL, verbose_name='مُعين إلى')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='service_requests', to='maintenance.device', verbose_name='الجهاز')),
                ('reporter', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reported_requests', to=settings.AUTH_USER_MODEL, verbose_name='مقدم البلاغ')),
            ],
            options={
                'verbose_name': 'طلب خدمة',
                'verbose_name_plural': 'طلبات الخدمة',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SLADefinition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم الاتفاقية')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('severity', models.CharField(blank=True, choices=[('critical', 'حرج'), ('high', 'عالي'), ('medium', 'متوسط'), ('low', 'منخفض')], max_length=20, null=True, verbose_name='درجة الخطورة')),
                ('priority', models.CharField(blank=True, choices=[('urgent', 'عاجل'), ('high', 'عالي'), ('medium', 'متوسط'), ('low', 'منخفض')], max_length=20, null=True, verbose_name='الأولوية')),
                ('response_time_hours', models.PositiveIntegerField(verbose_name='وقت الاستجابة (ساعات)')),
                ('resolution_time_hours', models.PositiveIntegerField(verbose_name='وقت الحل (ساعات)')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('device_category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='maintenance.devicecategory', verbose_name='فئة الجهاز')),
            ],
            options={
                'verbose_name': 'تعريف اتفاقية مستوى الخدمة',
                'verbose_name_plural': 'تعريفات اتفاقيات مستوى الخدمة',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Supplier',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم المورد')),
                ('code', models.CharField(max_length=50, unique=True, verbose_name='كود المورد')),
                ('contact_person', models.CharField(blank=True, max_length=200, verbose_name='الشخص المسؤول')),
                ('phone', models.CharField(blank=True, max_length=20, verbose_name='الهاتف')),
                ('email', models.EmailField(blank=True, max_length=254, verbose_name='البريد الإلكتروني')),
                ('website', models.URLField(blank=True, verbose_name='الموقع الإلكتروني')),
                ('address', models.TextField(blank=True, verbose_name='العنوان')),
                ('city', models.CharField(blank=True, max_length=100, verbose_name='المدينة')),
                ('country', models.CharField(blank=True, max_length=100, verbose_name='البلد')),
                ('postal_code', models.CharField(blank=True, max_length=20, verbose_name='الرمز البريدي')),
                ('tax_number', models.CharField(blank=True, max_length=50, verbose_name='الرقم الضريبي')),
                ('commercial_register', models.CharField(blank=True, max_length=50, verbose_name='السجل التجاري')),
                ('status', models.CharField(choices=[('active', 'نشط'), ('inactive', 'غير نشط'), ('suspended', 'معلق')], default='active', max_length=20, verbose_name='الحالة')),
                ('rating', models.PositiveIntegerField(blank=True, choices=[(1, '1'), (2, '2'), (3, '3'), (4, '4'), (5, '5')], null=True, verbose_name='التقييم')),
                ('payment_terms', models.CharField(blank=True, max_length=200, verbose_name='شروط الدفع')),
                ('credit_limit', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='حد الائتمان')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='تم الإنشاء بواسطة')),
            ],
            options={
                'verbose_name': 'مورد',
                'verbose_name_plural': 'الموردين',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='SparePart',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم قطعة الغيار')),
                ('part_number', models.CharField(max_length=100, unique=True, verbose_name='رقم القطعة')),
                ('description', models.TextField(blank=True, verbose_name='الوصف')),
                ('manufacturer', models.CharField(blank=True, max_length=200, verbose_name='الشركة المصنعة')),
                ('model_number', models.CharField(blank=True, max_length=100, verbose_name='رقم الموديل')),
                ('unit', models.CharField(choices=[('piece', 'قطعة'), ('meter', 'متر'), ('liter', 'لتر'), ('kilogram', 'كيلوجرام'), ('box', 'صندوق'), ('pack', 'عبوة')], default='piece', max_length=20, verbose_name='الوحدة')),
                ('current_stock', models.PositiveIntegerField(default=0, verbose_name='المخزون الحالي')),
                ('minimum_stock', models.PositiveIntegerField(default=1, verbose_name='الحد الأدنى للمخزون')),
                ('maximum_stock', models.PositiveIntegerField(blank=True, null=True, verbose_name='الحد الأقصى للمخزون')),
                ('reorder_point', models.PositiveIntegerField(blank=True, null=True, verbose_name='نقطة إعادة الطلب')),
                ('unit_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='تكلفة الوحدة')),
                ('last_purchase_price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='آخر سعر شراء')),
                ('storage_location', models.CharField(blank=True, max_length=200, verbose_name='موقع التخزين')),
                ('shelf_life_months', models.PositiveIntegerField(blank=True, null=True, verbose_name='مدة الصلاحية (شهور)')),
                ('status', models.CharField(choices=[('available', 'متوفر'), ('low_stock', 'مخزون منخفض'), ('out_of_stock', 'نفد المخزون'), ('discontinued', 'متوقف')], default='available', max_length=20, verbose_name='الحالة')),
                ('is_critical', models.BooleanField(default=False, verbose_name='حرج')),
                ('is_consumable', models.BooleanField(default=False, verbose_name='مستهلك')),
                ('image', models.ImageField(blank=True, null=True, upload_to='spare_parts/', verbose_name='الصورة')),
                ('datasheet', models.FileField(blank=True, null=True, upload_to='spare_parts/datasheets/', verbose_name='ورقة البيانات')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('compatible_devices', models.ManyToManyField(blank=True, related_name='compatible_spare_parts', to='maintenance.device', verbose_name='الأجهزة المتوافقة')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='تم الإنشاء بواسطة')),
                ('device_category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='spare_parts', to='maintenance.devicecategory', verbose_name='فئة الجهاز')),
                ('alternative_suppliers', models.ManyToManyField(blank=True, related_name='alternative_parts', to='maintenance.supplier', verbose_name='الموردين البديلين')),
                ('primary_supplier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='primary_parts', to='maintenance.supplier', verbose_name='المورد الأساسي')),
            ],
            options={
                'verbose_name': 'قطعة غيار',
                'verbose_name_plural': 'قطع الغيار',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='SystemNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='العنوان')),
                ('message', models.TextField(verbose_name='الرسالة')),
                ('notification_type', models.CharField(choices=[('service_request', 'طلب خدمة'), ('work_order', 'أمر عمل'), ('preventive_maintenance', 'صيانة وقائية'), ('sla_breach', 'خرق اتفاقية مستوى الخدمة'), ('system', 'نظام')], max_length=30, verbose_name='نوع الإشعار')),
                ('status', models.CharField(choices=[('pending', 'في الانتظار'), ('sent', 'تم الإرسال'), ('read', 'تم القراءة'), ('failed', 'فشل')], default='pending', max_length=20, verbose_name='الحالة')),
                ('is_read', models.BooleanField(default=False, verbose_name='تم القراءة')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('read_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ القراءة')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الإرسال')),
                ('priority', models.CharField(choices=[('urgent', 'عاجل'), ('high', 'عالي'), ('medium', 'متوسط'), ('low', 'منخفض')], default='medium', max_length=20, verbose_name='الأولوية')),
                ('expires_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الانتهاء')),
                ('pm_schedule', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='maintenance.preventivemaintenanceschedule', verbose_name='جدولة الصيانة الوقائية')),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to=settings.AUTH_USER_MODEL, verbose_name='المستقبل')),
                ('service_request', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='maintenance.servicerequest', verbose_name='طلب الخدمة')),
            ],
            options={
                'verbose_name': 'إشعار النظام',
                'verbose_name_plural': 'إشعارات النظام',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='NotificationQueue',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scheduled_for', models.DateTimeField(verbose_name='مجدول لـ')),
                ('attempts', models.PositiveIntegerField(default=0, verbose_name='المحاولات')),
                ('max_attempts', models.PositiveIntegerField(default=3, verbose_name='أقصى محاولات')),
                ('status', models.CharField(choices=[('pending', 'في الانتظار'), ('processing', 'جاري المعالجة'), ('completed', 'مكتمل'), ('failed', 'فشل'), ('cancelled', 'ملغي')], default='pending', max_length=20, verbose_name='الحالة')),
                ('last_error', models.TextField(blank=True, verbose_name='آخر خطأ')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('processed_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ المعالجة')),
                ('notification', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='queue_entries', to='maintenance.systemnotification', verbose_name='الإشعار')),
            ],
            options={
                'verbose_name': 'قائمة انتظار الإشعارات',
                'verbose_name_plural': 'قوائم انتظار الإشعارات',
                'ordering': ['scheduled_for'],
            },
        ),
        migrations.CreateModel(
            name='EmailLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('recipient_email', models.EmailField(max_length=254, verbose_name='بريد المستقبل')),
                ('recipient_name', models.CharField(blank=True, max_length=200, verbose_name='اسم المستقبل')),
                ('subject', models.CharField(max_length=300, verbose_name='الموضوع')),
                ('body', models.TextField(verbose_name='محتوى الرسالة')),
                ('status', models.CharField(choices=[('pending', 'في الانتظار'), ('sent', 'تم الإرسال'), ('failed', 'فشل'), ('bounced', 'مرتد')], default='pending', max_length=20, verbose_name='الحالة')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الإرسال')),
                ('error_message', models.TextField(blank=True, verbose_name='رسالة الخطأ')),
                ('message_id', models.CharField(blank=True, max_length=200, verbose_name='معرف الرسالة')),
                ('provider_response', models.TextField(blank=True, verbose_name='رد مقدم الخدمة')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('notification', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='email_logs', to='maintenance.systemnotification', verbose_name='الإشعار')),
            ],
            options={
                'verbose_name': 'سجل إيميل',
                'verbose_name_plural': 'سجلات الإيميلات',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='WorkOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('wo_number', models.CharField(max_length=50, unique=True, verbose_name='رقم أمر العمل')),
                ('title', models.CharField(max_length=200, verbose_name='عنوان أمر العمل')),
                ('description', models.TextField(verbose_name='وصف العمل')),
                ('wo_type', models.CharField(choices=[('corrective', 'صيانة تصحيحية'), ('preventive', 'صيانة وقائية'), ('inspection', 'فحص'), ('calibration', 'معايرة'), ('upgrade', 'ترقية'), ('installation', 'تركيب'), ('other', 'أخرى')], default='corrective', max_length=20, verbose_name='نوع أمر العمل')),
                ('priority', models.CharField(choices=[('urgent', 'عاجل'), ('high', 'عالي'), ('medium', 'متوسط'), ('low', 'منخفض')], default='medium', max_length=20, verbose_name='الأولوية')),
                ('status', models.CharField(choices=[('new', 'جديد'), ('assigned', 'تم التعيين'), ('in_progress', 'جاري العمل'), ('wait_parts', 'انتظار قطع غيار'), ('on_hold', 'معلق'), ('resolved', 'تم الحل'), ('qa_verified', 'تم التحقق'), ('closed', 'مغلق'), ('cancelled', 'ملغي')], default='new', max_length=20, verbose_name='الحالة')),
                ('scheduled_start', models.DateTimeField(blank=True, null=True, verbose_name='موعد البدء المجدول')),
                ('scheduled_end', models.DateTimeField(blank=True, null=True, verbose_name='موعد الانتهاء المجدول')),
                ('actual_start', models.DateTimeField(blank=True, null=True, verbose_name='وقت البدء الفعلي')),
                ('actual_end', models.DateTimeField(blank=True, null=True, verbose_name='وقت الانتهاء الفعلي')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الإنجاز')),
                ('estimated_hours', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='الساعات المقدرة')),
                ('actual_hours', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='الساعات الفعلية')),
                ('labor_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='تكلفة العمالة')),
                ('parts_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='تكلفة القطع')),
                ('total_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='التكلفة الإجمالية')),
                ('qa_required', models.BooleanField(default=False, verbose_name='يتطلب ضمان الجودة')),
                ('qa_verified_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ التحقق')),
                ('qa_notes', models.TextField(blank=True, verbose_name='ملاحظات ضمان الجودة')),
                ('completion_notes', models.TextField(blank=True, verbose_name='ملاحظات الإنجاز')),
                ('assignee', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_work_orders', to=settings.AUTH_USER_MODEL, verbose_name='المسؤول')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='created_work_orders', to=settings.AUTH_USER_MODEL, verbose_name='تم الإنشاء بواسطة')),
                ('qa_verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='qa_verified_work_orders', to=settings.AUTH_USER_MODEL, verbose_name='تم التحقق بواسطة')),
                ('service_request', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='work_orders', to='maintenance.servicerequest', verbose_name='البلاغ')),
            ],
            options={
                'verbose_name': 'أمر عمل',
                'verbose_name_plural': 'أوامر العمل',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='systemnotification',
            name='work_order',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='maintenance.workorder', verbose_name='أمر العمل'),
        ),
        migrations.CreateModel(
            name='DowntimeEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('start_time', models.DateTimeField(verbose_name='وقت بداية التوقف')),
                ('end_time', models.DateTimeField(blank=True, null=True, verbose_name='وقت نهاية التوقف')),
                ('downtime_type', models.CharField(choices=[('planned', 'مخطط'), ('unplanned', 'غير مخطط'), ('emergency', 'طوارئ')], default='unplanned', max_length=20, verbose_name='نوع التوقف')),
                ('reason', models.TextField(verbose_name='سبب التوقف')),
                ('impact_description', models.TextField(blank=True, verbose_name='وصف التأثير')),
                ('cost_impact', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='التأثير المالي')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='downtime_events', to='maintenance.device', verbose_name='الجهاز')),
                ('reported_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reported_downtime_events', to=settings.AUTH_USER_MODEL, verbose_name='تم الإبلاغ بواسطة')),
                ('resolved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='resolved_downtime_events', to=settings.AUTH_USER_MODEL, verbose_name='تم الحل بواسطة')),
                ('related_work_order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='downtime_events', to='maintenance.workorder', verbose_name='أمر الشغل المرتبط')),
            ],
            options={
                'verbose_name': 'حدث توقف',
                'verbose_name_plural': 'أحداث التوقف',
                'ordering': ['-start_time'],
            },
        ),
        migrations.AddField(
            model_name='devicedowntime',
            name='work_order',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='device_downtimes', to='maintenance.workorder'),
        ),
        migrations.CreateModel(
            name='WorkOrderPart',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantity_requested', models.PositiveIntegerField(verbose_name='الكمية المطلوبة')),
                ('quantity_used', models.PositiveIntegerField(default=0, verbose_name='الكمية المستخدمة')),
                ('status', models.CharField(choices=[('requested', 'مطلوبة'), ('reserved', 'محجوزة'), ('issued', 'مصروفة'), ('returned', 'مرتجعة')], default='requested', max_length=20, verbose_name='الحالة')),
                ('unit_cost', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='تكلفة الوحدة')),
                ('total_cost', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='التكلفة الإجمالية')),
                ('requested_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الطلب')),
                ('issued_at', models.DateTimeField(blank=True, null=True, verbose_name='تاريخ الصرف')),
                ('notes', models.TextField(blank=True, verbose_name='ملاحظات')),
                ('issued_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='parts_issued', to=settings.AUTH_USER_MODEL, verbose_name='صرفت بواسطة')),
                ('requested_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='parts_requested', to=settings.AUTH_USER_MODEL, verbose_name='طلبت بواسطة')),
                ('spare_part', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='maintenance.sparepart', verbose_name='قطعة الغيار')),
                ('work_order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='parts_used', to='maintenance.workorder', verbose_name='أمر الشغل')),
            ],
            options={
                'verbose_name': 'قطعة غيار في أمر شغل',
                'verbose_name_plural': 'قطع غيار في أوامر الشغل',
            },
        ),
        migrations.CreateModel(
            name='DeviceAccessoryUsageLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scanned_at', models.DateTimeField(auto_now_add=True, verbose_name='وقت المسح')),
                ('notes', models.CharField(blank=True, max_length=255, null=True, verbose_name='ملاحظات')),
                ('accessory', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='maintenance.deviceaccessory', verbose_name='الملحق')),
                ('usage_log', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='accessory_items', to='maintenance.deviceusagelog', verbose_name='سجل الاستخدام')),
            ],
            options={
                'verbose_name': 'عنصر ملحق في سجل الاستخدام',
                'verbose_name_plural': 'عناصر الملحقات في سجل الاستخدام',
                'unique_together': {('usage_log', 'accessory')},
            },
        ),
        migrations.CreateModel(
            name='DeviceUsageLogItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scanned_at', models.DateTimeField(auto_now_add=True, verbose_name='وقت المسح')),
                ('notes', models.CharField(blank=True, max_length=255, null=True, verbose_name='ملاحظات')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='maintenance.device', verbose_name='الجهاز')),
                ('usage_log', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='maintenance.deviceusagelog', verbose_name='سجل الاستخدام')),
            ],
            options={
                'verbose_name': 'عنصر سجل استخدام الجهاز',
                'verbose_name_plural': 'عناصر سجل استخدام الأجهزة',
                'unique_together': {('usage_log', 'device')},
            },
        ),
        migrations.CreateModel(
            name='JobPlanStep',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('step_number', models.PositiveIntegerField(verbose_name='رقم الخطوة')),
                ('title', models.CharField(max_length=200, verbose_name='عنوان الخطوة')),
                ('description', models.TextField(verbose_name='وصف الخطوة')),
                ('estimated_minutes', models.PositiveIntegerField(default=0, verbose_name='الدقائق المقدرة')),
                ('job_plan', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='steps', to='maintenance.jobplan', verbose_name='خطة العمل')),
            ],
            options={
                'verbose_name': 'خطوة خطة العمل',
                'verbose_name_plural': 'خطوات خطط العمل',
                'ordering': ['job_plan', 'step_number'],
                'unique_together': {('job_plan', 'step_number')},
            },
        ),
        migrations.CreateModel(
            name='NotificationTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='اسم القالب')),
                ('notification_type', models.CharField(choices=[('service_request', 'طلب خدمة'), ('work_order', 'أمر عمل'), ('preventive_maintenance', 'صيانة وقائية'), ('sla_breach', 'خرق اتفاقية مستوى الخدمة'), ('system', 'نظام')], max_length=30, verbose_name='نوع الإشعار')),
                ('subject_template', models.CharField(max_length=300, verbose_name='قالب الموضوع')),
                ('body_template', models.TextField(verbose_name='قالب المحتوى')),
                ('language', models.CharField(choices=[('ar', 'العربية'), ('en', 'English')], default='ar', max_length=10, verbose_name='اللغة')),
                ('is_html', models.BooleanField(default=False, verbose_name='HTML')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('is_default', models.BooleanField(default=False, verbose_name='افتراضي')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='تم الإنشاء بواسطة')),
            ],
            options={
                'verbose_name': 'قالب إشعار',
                'verbose_name_plural': 'قوالب الإشعارات',
                'ordering': ['notification_type', 'name'],
                'unique_together': {('notification_type', 'language', 'is_default')},
            },
        ),
        migrations.CreateModel(
            name='SLAMatrix',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('severity', models.CharField(choices=[('critical', 'حرج'), ('high', 'عالي'), ('medium', 'متوسط'), ('low', 'منخفض')], max_length=20, verbose_name='درجة الخطورة')),
                ('impact', models.CharField(choices=[('extensive', 'واسع'), ('significant', 'كبير'), ('moderate', 'متوسط'), ('minor', 'بسيط')], max_length=20, verbose_name='التأثير')),
                ('priority', models.CharField(choices=[('urgent', 'عاجل'), ('high', 'عالي'), ('medium', 'متوسط'), ('low', 'منخفض')], max_length=20, verbose_name='الأولوية')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='تاريخ الإنشاء')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='تاريخ التحديث')),
                ('is_active', models.BooleanField(default=True, verbose_name='نشط')),
                ('device_category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='maintenance.devicecategory', verbose_name='فئة الجهاز')),
                ('sla_definition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='maintenance.sladefinition', verbose_name='تعريف SLA')),
            ],
            options={
                'verbose_name': 'مصفوفة SLA',
                'verbose_name_plural': 'مصفوفات SLA',
                'unique_together': {('device_category', 'severity', 'impact', 'priority')},
            },
        ),
        migrations.AddIndex(
            model_name='sparepart',
            index=models.Index(fields=['part_number'], name='maintenance_part_nu_689903_idx'),
        ),
        migrations.AddIndex(
            model_name='sparepart',
            index=models.Index(fields=['status', 'current_stock'], name='maintenance_status_846177_idx'),
        ),
        migrations.AddIndex(
            model_name='notificationqueue',
            index=models.Index(fields=['status', 'scheduled_for'], name='maintenance_status_c00d3e_idx'),
        ),
        migrations.AddIndex(
            model_name='emaillog',
            index=models.Index(fields=['status', 'created_at'], name='maintenance_status_acfa88_idx'),
        ),
        migrations.AddIndex(
            model_name='emaillog',
            index=models.Index(fields=['recipient_email'], name='maintenance_recipie_1223b1_idx'),
        ),
        migrations.AddIndex(
            model_name='systemnotification',
            index=models.Index(fields=['recipient', 'is_read'], name='maintenance_recipie_3d1140_idx'),
        ),
        migrations.AddIndex(
            model_name='systemnotification',
            index=models.Index(fields=['notification_type', 'status'], name='maintenance_notific_f41ef1_idx'),
        ),
    ]
